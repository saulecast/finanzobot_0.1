"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["components_2-0-activities-searchbox-view"],{"./src/client/components_2.0/activities/searchbox.view.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),r=s("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=s("./node_modules/@babel/runtime/regenerator/index.js"),i=s.n(a),c=(s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/@paypalcorp/pp-react-auto-suggest/dist/@paypalcorp/pp-react-auto-suggest.esm.js")),u=s("./src/client/utils/activities.ts"),l=s("./src/client/utils/browserhelper.ts"),d=s("./src/client/actions/activities.ts"),m=s("./node_modules/react-redux/es/index.js"),p=s("./node_modules/react/index.js"),g=s("./node_modules/@paypalcorp/pp-react-search-input/dist/@paypalcorp/pp-react-search-input.esm.js"),f=s("./src/client/utils/ajax.util.ts"),v=s("./src/client/constants.ts"),_=s("./node_modules/underscore/modules/index-all.js");const h="fSlCg",j="OWf+B",w="niS90";var b=s("./node_modules/commonweb-utils/index.js"),y=s("./node_modules/react-router/esm/react-router.js"),P=s("./src/client/utils/common.ts"),x=s("./src/client/utils/app-context.ts");function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){(0,o.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var L=v.Z.ROUTES;const I=function(e){var t=b.QX.safeGet(e,"ftsData")||"",s=(0,m.v9)((function(e){return e}),m.wU),o=s.locality,a=void 0===o?{}:o,v=s.activitiesReducer,O=(v=void 0===v?{}:v).activities,I=(O=void 0===O?{}:O).activeQueryParams,T=void 0===I?{}:I,A=s.locality.directionality,E=void 0===A?"ltr":A,C=p.useRef(null),k=(0,m.I0)(),D=(0,y.k6)(),N=p.useState([]),F=(0,r.Z)(N,2),G=F[0],R=F[1],q=p.useState(t),M=(0,r.Z)(q,2),Z=M[0],U=M[1],K=p.useState(!1),W=(0,r.Z)(K,2),X=W[0],Y=W[1],H=p.useRef(),B=(0,P.UD)("activity.activity.inc.search.placeholder"),z=(0,p.useContext)(x.Z).fpti,J="search:enter",Q=function(){H.current&&H.current.abort();var e=new AbortController,t=e.signal;return H.current=e,{signal:t,controller:e}},V=function(){var e=(0,n.Z)(i().mark((function e(t){var s,o,n,r,c,d,m,p,g,v,h,j,w,b,y,P,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_.xb)(t)){e.next=15;break}return s=window&&window.location&&window.location.search,o=(0,u.M7)(s,a.timezone),n=S(S({},o),T),r=n.start_date,c=void 0===r?"":r,d=n.end_date,m={suggest_text:t,suggest_type:"autocomplete",start_time:c,end_time:void 0===d?"":d},p=(0,l.qk)(m),p=btoa(p),g="".concat(L.API.LOAD_SUGGESTIONS,"?q=").concat(p),v=Q(),h=v.signal,e.next=12,(0,f.t)(g,"GET",{},{"X-Requested-With":"XMLHttpRequest",signal:h});case 12:j=e.sent,b=(w=j||{}).status,y=w.data,P=void 0===y?{}:y,200===b&&(x=P.map((function(e,t){return{id:t+1,value:e}})),R(x));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){if(!X){var t=e.target.value;U(t.slice(0,40)),R([])}},ee=function(e){var t=e.target.value;if(13===e.keyCode&&!(0,_.xb)(Z)){window.PAYPAL.fpti.triggerFPTIImpression(J,J,{}),z.triggerFPTIImpression({pageGroup:"listPage",pageName:"Search",event_name:"screen_shown",module:"SearchEnter"}),se(t.trim())}},te=function(){U(""),R([]);var e=window&&window.location&&window.location.search;e=e.substr(1,e.length);var t=(0,l.iW)(e);window.PAYPAL.fpti.triggerFPTIImpression("searchclear:closebutton","searchclear:closebutton",{}),z.triggerFPTIImpression({pageGroup:"listPage",pageName:"Search",event_name:"screen_shown",module:"SearchClear"}),(0,_.xb)(Z)||(0,_.xb)(t)||!t.free_text_search||se("")},se=function(){var e=(0,n.Z)(i().mark((function e(t){var s,o,n,r,c,m,p,g,v,h,j,w,b,y,P,x,O,I,T,A,E,C,N,F,G,q,M;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=window&&window.location&&window.location.search,o=(0,u.nd)(),n=(0,u.Tm)(s,a.timezone),r=n.start_date,c=void 0===r?"":r,m=n.end_date,p=void 0===m?"":m,g=S(S({},o),{},{start_date:c,end_date:p,free_text_search:t}),v=(0,l.qk)(g),D.replace({pathname:"",search:"?".concat(v)}),v=btoa(v),h="".concat(L.API.LOAD_FILTER,"?q=").concat(v),k((0,d.$0)(!0)),R([]),Y(!0),j=Q(),w=j.signal,t&&(b={pageGroup:"listPage",pageName:"Search",event_name:"listPage_cta_pressed",module:J,searchValue:t},window.PAYPAL.fpti.trackFPTILink(t,J,J),z.trackFPTIEvent(b)),e.next=16,(0,f.t)(h,"GET",{},{"X-Requested-With":"XMLHttpRequest",fetchSignal:w});case 16:y=e.sent,x=(P=y||{}).status,O=P.data,I=void 0===O?{}:O,200!==x||(0,_.xb)(I)||((null==I||null===(T=I.data)||void 0===T||null===(A=T.activity)||void 0===A?void 0:A.noOfTransactions)>0?(N={pageGroup:"listPage",pageName:"Search",event_name:"search_result_shown",module:"non-empty",count:null==I||null===(E=I.data)||void 0===E||null===(C=E.activity)||void 0===C?void 0:C.noOfTransactions},window.PAYPAL.fpti.trackFPTILink("freeTextSearchResultOnField","search:searchresultonfield","search:searchresultonfield"),z.trackFPTIEvent(N)):(q={pageGroup:"listPage",pageName:"Search",event_name:"search_result_shown",module:"empty",count:null==I||null===(F=I.data)||void 0===F||null===(G=F.activity)||void 0===G?void 0:G.noOfTransactions},window.PAYPAL.fpti.trackFPTILink("freeTextSearchResultNull","search:searchresultnull","search:searchresultnull"),z.trackFPTIEvent(q)),M=(0,u.V0)(I),k((0,d.GG)(M)),k((0,d.MW)((0,_.xb)(t)?"":t)),k((0,d.sO)(M.isServerSideSearchResultNotFound)),k((0,d.rM)([])),k((0,d.KM)({start_date:c,end_date:p,free_text_search:t}))),R([]),Y(!1),k((0,d.$0)(!1));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=p.createElement(c.wN,{suggestions:G,query:Z,onSelect:function(e,t){var s=(t||{}).value,o=void 0===s?"":s;U(o),se(o.trim())},className:h}),ne=function(e){!C.current.contains(e.target)&&(0,_.xb)(G)&&(Q().controller.abort(),R([]))};return p.useEffect((function(){return document.addEventListener("mousedown",ne,!1),function(){document.removeEventListener("mousedown",ne,!1)}}),[]),p.createElement("div",{dir:E,className:w,ref:C},(0,_.xb)(Z)?p.createElement(c.J,{id:"searchInput",suggestionList:oe,name:"searchInput",label:B,value:Z,rightIcon:null,onChange:$,onKeyDown:ee,debounceTimeout:500,suggestionListContainerClassName:j,fetchSuggestions:function(e){return V(e)},suggestions:G,triggerComponent:g.M,isSuggestionListInline:!0,onClear:te,autoComplete:"off"}):p.createElement(c.J,{id:"searchInput",suggestionList:oe,name:"searchInput",label:B,value:Z,onChange:$,onKeyDown:ee,debounceTimeout:500,suggestionListContainerClassName:j,fetchSuggestions:function(e){return V(e)},suggestions:G,triggerComponent:g.M,isSuggestionListInline:!0,onClear:te,autoComplete:"off"}))}}}]);