"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["components_2-0-activities-filter-view"],{"./src/client/less_2.0/activities/filter-view.module.less":(e,t,r)=>{r.d(t,{Z:()=>i});const i={filterGroup:"_5ahmT",filterPill:"_7fF-v",filterButton:"yJXKe",serverFilterButton:"_2Un36",serverFilterClose:"YiWCT",filterItem:"xp1Nk",noFilterItem:"_6M22M",dateFilter:"t2WbA",hiddenPhone:"_9GSMw"}},"./src/client/less_2.0/activities/filter.module.less":(e,t,r)=>{r.d(t,{Z:()=>i});const i={filterWrap:"O0eXw",filterIcon:"S+ZeB",filterDialogContainer:"dtwWz",filterBtn:"VBt1k",filterBtnClose:"r1Cog",filterBtnCloseNotSelected:"_9Dnjn",closeIcon:"C7Det",fieldSet:"oRhCV",radioGroupContainer:"Fl-38",dateFilterDialog:"RIKkl",presets:"JfAKS",manualDateLabel:"T6bLi"}},"./src/client/components_2.0/activities/filter.view.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js"),r("./node_modules/core-js/modules/es.object.define-property.js");var i=r("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),a=r("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=r("./node_modules/@babel/runtime/regenerator/index.js"),c=r.n(o),l=(r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.search.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.some.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/react/index.js")),d=r("./src/client/utils/activities.ts"),u=r("./src/client/actions/activities.ts"),p=r("./node_modules/react-redux/es/index.js"),m=r("./node_modules/@paypalcorp/pp-react-buttons/dist/@paypalcorp/pp-react-buttons.esm.js"),v=r("./node_modules/@paypalcorp/pp-react-icon-button/dist/@paypalcorp/pp-react-icon-button.esm.js"),f=r("./node_modules/@paypalcorp/worldready-react/browser.js"),y=r("./node_modules/@paypalcorp/pp-react-icons/dist/@paypalcorp/pp-react-icons.esm.js"),_=r("./src/client/less_2.0/activities/filter.module.less"),w=r("./src/client/less_2.0/activities/filter-view.module.less"),b=r("./src/client/utils/browserhelper.ts"),P=r("./node_modules/underscore/modules/index-all.js"),F=r("./node_modules/@loadable/component/dist/loadable.esm.js"),g=r("./src/client/constants.ts"),S=r("./src/client/utils/ajax.util.ts"),j=r("./node_modules/react-router/esm/react-router.js"),E=r("./src/client/utils/common.ts"),h=r("./src/client/utils/app-context.ts");function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=(0,F.ZP)({chunkName:function(){return"date-container-view"},isReady:function(e){return Boolean(r.m[this.resolve(e)])},requireAsync:function(){return Promise.all([r.e("ppreact-lib"),r.e("date-container-view")]).then(r.bind(r,"./src/client/components_2.0/activities/date-container.view.tsx"))},requireSync:function(e){return r(this.resolve(e))},resolve:function(){return"./src/client/components_2.0/activities/date-container.view.tsx"}}),C=(0,F.ZP)({chunkName:function(){return"filter-type-filter-dialog-view"},isReady:function(e){return Boolean(r.m[this.resolve(e)])},requireAsync:function(){return Promise.all([r.e("ppreact-lib"),r.e("filter-type-filter-dialog-view")]).then(r.bind(r,"./src/client/components_2.0/activities/filter/type-filter-dialog.view.tsx"))},requireSync:function(e){return r(this.resolve(e))},resolve:function(){return"./src/client/components_2.0/activities/filter/type-filter-dialog.view.tsx"}}),N=(0,F.ZP)({chunkName:function(){return"filter-status-filter-dialog-view"},isReady:function(e){return Boolean(r.m[this.resolve(e)])},requireAsync:function(){return Promise.all([r.e("ppreact-lib"),r.e("filter-status-filter-dialog-view")]).then(r.bind(r,"./src/client/components_2.0/activities/filter/status-filter-dialog.view.tsx"))},requireSync:function(e){return r(this.resolve(e))},resolve:function(){return"./src/client/components_2.0/activities/filter/status-filter-dialog.view.tsx"}}),k=(0,F.ZP)({chunkName:function(){return"filter-currency-filter-dialog-view"},isReady:function(e){return Boolean(r.m[this.resolve(e)])},requireAsync:function(){return Promise.all([r.e("ppreact-lib"),r.e("filter-currency-filter-dialog-view")]).then(r.bind(r,"./src/client/components_2.0/activities/filter/currency-filter-dialog.view.tsx"))},requireSync:function(e){return r(this.resolve(e))},resolve:function(){return"./src/client/components_2.0/activities/filter/currency-filter-dialog.view.tsx"}}),Z=(0,F.ZP)({chunkName:function(){return"filter-server-query-params-filter-view"},isReady:function(e){return Boolean(r.m[this.resolve(e)])},requireAsync:function(){return r.e("filter-server-query-params-filter-view").then(r.bind(r,"./src/client/components_2.0/activities/filter/server-query-params-filter.view.tsx"))},requireSync:function(e){return r(this.resolve(e))},resolve:function(){return"./src/client/components_2.0/activities/filter/server-query-params-filter.view.tsx"}}),A=g.Z.ROUTES,O=function(e){var t=e.startDate,r=e.endDate,n=e.locality,o=(0,p.v9)((function(e){return e}),p.wU).activitiesReducer,F=(o=void 0===o?{}:o).activities,g=(F=void 0===F?{}:F).activityModal,T=(g=void 0===g?{}:g).transactions,O=void 0===T?[]:T,B=g.currencyCodes,R=void 0===B?[]:B,x=g.filters,L=void 0===x?{}:x,q=g.isServerSideSearchResultNotFound,U=void 0!==q&&q,M=F.activeQueryParams,G=void 0===M?{}:M,z=F.serverQueryParamsFilterData,Y=void 0===z?[]:z,V=F.ftsData,W=void 0===V?"":V,K=(0,j.k6)(),X=(0,p.I0)(),H=(0,l.useContext)(h.Z).fpti,Q=(0,d.jX)(t,r,n),$={INCOMING_PAYMENTS_TO_REVIEW:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.incomingPaymentsToReview"),TRACKING_NUMBERS_TO_ADD:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.trackingNumbersToAdd"),SHIPPING_LABELS_TO_PRINT:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.shippingLabelsToPrint"),PAYMENT_REQUESTS_TO_REVIEW:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.paymentRequestsToReview"),INVOICES_TO_PAY:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.invoicesToPay"),ON_RISK_HOLD:(0,E.UD)("activity.activity.inc.dropdown.transactionStatus.hold")},J={PREAPPROVED:(0,E.UD)("activity.activity.inc.dropdown.transactionType.preapproved"),PAYMENT_SENT:(0,E.UD)("activity.activity.inc.dropdown.transactionType.sent"),PAYMENT_RECEIVED:(0,E.UD)("activity.activity.inc.dropdown.transactionType.received"),REFUNDS:(0,E.UD)("activity.activity.inc.dropdown.transactionType.refunds"),TRANSFER:(0,E.UD)("activity.activity.inc.dropdown.transactionType.transfers"),REPORTED_TRANSACTIONS:(0,E.UD)("activity.activity.inc.dropdown.transactionType.report")},ee=(0,l.useState)(!1),te=(0,a.Z)(ee,2),re=te[0],ie=te[1],ne=(0,l.useState)(!1),se=(0,a.Z)(ne,2),ae=se[0],oe=se[1],ce=(0,l.useState)(!1),le=(0,a.Z)(ce,2),de=le[0],ue=le[1],pe=(0,l.useState)(!1),me=(0,a.Z)(pe,2),ve=me[0],fe=me[1],ye=(0,l.useState)({value:"",label:""}),_e=(0,a.Z)(ye,2),we=_e[0],be=_e[1],Pe=(0,l.useState)({value:"",label:""}),Fe=(0,a.Z)(Pe,2),ge=Fe[0],Se=Fe[1],je=(0,l.useState)({value:"",label:""}),Ee=(0,a.Z)(je,2),he=Ee[0],Te=Ee[1],De=(0,l.useState)({value:Q.value,label:(0,E.UD)(Q.label,{startDate:(0,d.L0)(t,L.localizedDatePatternForMoment),endDate:(0,d.L0)(r,L.localizedDatePatternForMoment)})}),Ie=(0,a.Z)(De,2),Ce=Ie[0],Ne=Ie[1],ke=function(){var e=(0,s.Z)(c().mark((function e(t,r){var i,s,a,o,l,p,m,v,f,y,_,w,F,g,j,E,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={value:"",label:""},s=[],"closeTypeFilter"!==t.target.id){e.next=26;break}if(a={pageGroup:"listPage",pageName:"filter",module:"closeTypeFilter",event_name:"filter_pressed"},window.PAYPAL.fpti.trackFPTILink("closeTypeFilter","closedadvancedfilters","closedadvancedfilters"),H.trackFPTIEvent(a),o={pageGroup:"listPage",pageName:"filter",module:"txnTypeRemoved",event_name:"filter_pressed",filterValue:r},window.PAYPAL.fpti.trackFPTILink("txnstatus","advancedfilters:txntype:removed:"+r,"advancedfilters:txntype:removed:"+r),H.trackFPTIEvent(o),be(i),"REPORTED_TRANSACTIONS"!==r){e.next=24;break}return l=window&&window.location&&window.location.search,p=(0,d.M7)(l,n.timezone),m=D(D(D({},p),G),{},{type:""}),X((0,u.$0)(!0)),v=(0,b.qk)(m),v=btoa(v),f="".concat(A.API.LOAD_FILTER,"?q=").concat(v),X((0,u.$0)(!0)),e.next=21,(0,S.t)(f,"GET",{},{"X-Requested-With":"XMLHttpRequest"});case 21:y=e.sent,w=(_=y||{}).status,F=_.data,g=void 0===F?{}:F,200!==w||(0,P.xb)(g)||(j=(0,d.V0)(g),X((0,u.Wg)(j.transactions)),X((0,u.$0)(!1)),s=j.transactions);case 24:e.next=27;break;case 26:"closeStatusFilter"===t.target.id?(E={pageGroup:"listPage",pageName:"filter",module:"closeStatusFilter",event_name:"filter_pressed"},window.PAYPAL.fpti.trackFPTILink("closeStatusFilter","closedadvancedfilters","closedadvancedfilters"),H.trackFPTIEvent(E),Se(i)):"closeCurrencyFilter"===t.target.id&&(h={pageGroup:"listPage",pageName:"filter",module:"closeCurrencyFilter",event_name:"filter_pressed"},window.PAYPAL.fpti.trackFPTILink("closeCurrencyFilter","closedadvancedfilters","closedadvancedfilters"),H.trackFPTIEvent(h),Te(i));case 27:Ze(t.target.id,s);case 28:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=G||{},t=e.type,r=void 0===t?"":t,i=e.status,n=void 0===i?"":i,s=e.currency,a=void 0===s?"":s;(0,P.xb)(r)&&be({value:"",label:""}),(0,P.xb)(n)&&Se({value:"",label:""}),(0,P.xb)(a)&&Te({value:"",label:""})}),[G.type,G.status,G.currency]),l.useEffect((function(){var e=window&&window.location&&window.location.search,t=(0,d.M7)(e,n.timezone),r=(0,i.Z)(O);(0,d.X4)(r,t.type,t.status,t.currency,W,U),be({value:t.type,label:J[t.type]}),Se({value:t.status,label:$[t.status]}),Te({value:t.currency,label:(0,d.Q8)(t.currency,R)}),X((0,u.Wg)(r))}),[t,r]),l.useEffect((function(){var e=window&&window.location&&window.location.search,t=(0,d.M7)(e,n.timezone),r=(0,i.Z)(O);t.currency=R.some((function(e){return e.currencyCode===t.currency}))?t.currency:"",(0,d.X4)(r,t.type,t.status,t.currency,W,U),X((0,u.Wg)(r))}),[W,U]);var Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=window&&window.location&&window.location.search,s=(0,d.M7)(r,n.timezone),a=D(D({},s),G),o=t.length>0?(0,i.Z)(t):(0,i.Z)(O);if("closeTypeFilter"===e){(0,d.X4)(o,null,s.status,s.currency,W,U),a.type="";var c=(0,b.qk)(a);K.replace({pathname:"",search:"?".concat(c)}),X((0,u.KM)(D(D({},G),{},{type:""}))),X((0,u.l6)({transactionFilter:null,transactionStatusFilter:s.status,transactionCurrencyFilter:s.currency}))}else if("closeStatusFilter"===e){(0,d.X4)(o,s.type,null,s.currency,W,U),a.status="";var l=(0,b.qk)(a);K.replace({pathname:"",search:"?".concat(l)}),X((0,u.KM)(D(D({},G),{},{status:""}))),X((0,u.l6)({transactionFilter:s.type,transactionCurrencyFilter:s.currency,transactionStatusFilter:null}))}else if("closeCurrencyFilter"===e){(0,d.X4)(o,s.type,s.status,null,W,U),a.currency="";var p=(0,b.qk)(a);K.replace({pathname:"",search:"?".concat(p)}),X((0,u.l6)({transactionFilter:s.type,transactionStatusFilter:s.status,transactionCurrencyFilter:null})),X((0,u.KM)(D(D({},G),{},{currency:""})))}else o.forEach((function(e){e.shouldShow=!0}));X((0,u.$0)(!0)),X((0,u.Wg)(o)),X((0,u.$0)(!1))};return l.createElement(l.Fragment,null,l.createElement("ul",{className:w.Z.filterGroup},l.createElement("li",{className:w.Z.filterItem},l.createElement(m.Button,{className:"".concat(_.Z.filterBtn," ").concat(w.Z.filterButton," ").concat(w.Z.dateFilter),role:"button",size:"sm",id:"dateFilter","data-testid":"date-filter","data-cy":"dateFilter",secondary:!0,onClick:function(e){"dateFilter"===e.target.id&&ie(!re)}},l.createElement(f.v0,{id:"activity.activity.inc.datepicker.dateContainerLabel"}),": ",Ce.label),re&&l.createElement(I,{setIsDatePickerDialogOpen:ie,selectedDatePreset:Ce,setSelectedDatePreset:Ne})),l.createElement("li",{className:"".concat(w.Z.filterItem," ").concat(w.Z.hiddenPhone)},l.createElement(m.Button,{className:"".concat(_.Z.filterBtn," ").concat(w.Z.filterButton," ").concat(we.label?_.Z.filterBtnClose:_.Z.filterBtnCloseNotSelected),role:"button",size:"sm",id:"typeFilter","data-cy":"typeFilter",secondary:!0,onClick:function(e){if("typeFilter"===e.target.id){window.PAYPAL.fpti.trackFPTILink("typeFilter","openadvancedfilters","openadvancedfilters"),H.trackFPTIEvent({pageGroup:"listPage",pageName:"filter",module:"typeFilter",event_name:"filter_pressed"}),oe(!ae)}}},l.createElement(f.v0,{id:"activity.activity.inc.filterBy.type"}),we.label&&": ".concat(we.label),we.label&&l.createElement(v.IconButton,{className:_.Z.closeIcon,svgIconComponent:y.V2CloseSmIcon,id:"closeTypeFilter","data-testid":"closeTypeFilter",inverse:!0,size:"sm",onClick:function(e){return ke(e,we.value)}},l.createElement(f.v0,{id:"activity.activity.inc.dropdown.close"}))),ae&&l.createElement(C,{setIsTypeDialogOpen:oe,selectedType:we,setSelectedType:be,resetFilters:Ze,ftsData:W,isServerSideSearchResultNotFound:U})),l.createElement("li",{className:"".concat(w.Z.filterItem," ").concat(w.Z.hiddenPhone)},l.createElement(m.Button,{className:"".concat(_.Z.filterBtn," ").concat(w.Z.filterButton," ").concat(ge.label?_.Z.filterBtnClose:_.Z.filterBtnCloseNotSelected),role:"button",size:"sm",id:"statusFilter","data-cy":"statusFilter",secondary:!0,onClick:function(e){if("statusFilter"===e.target.id){window.PAYPAL.fpti.trackFPTILink("statusFilter","openadvancedfilters","openadvancedfilters"),H.trackFPTIEvent({pageGroup:"listPage",pageName:"filter",module:"statusFilter",event_name:"filter_pressed"}),ue(!de)}}},l.createElement(f.v0,{id:"activity.activity.inc.filterBy.status"}),ge.label&&": ".concat(ge.label),ge.label&&l.createElement(v.IconButton,{className:_.Z.closeIcon,svgIconComponent:y.V2CloseSmIcon,id:"closeStatusFilter","data-testid":"closeStatusFilter",inverse:!0,size:"sm",onClick:ke},l.createElement(f.v0,{id:"activity.activity.inc.dropdown.close"}))),de&&l.createElement(N,{setIsStatusDialogOpen:ue,selectedStatus:ge,setSelectedStatus:Se,resetFilters:Ze})),R&&R.length>1&&l.createElement("li",{className:"".concat(w.Z.filterItem," ").concat(w.Z.hiddenPhone)},l.createElement(m.Button,{className:"".concat(_.Z.filterBtn," ").concat(w.Z.filterButton," ").concat(he.label?_.Z.filterBtnClose:_.Z.filterBtnCloseNotSelected),role:"button",size:"sm",id:"currencyFilter","data-cy":"currencyFilter",secondary:!0,onClick:function(e){if("currencyFilter"===e.target.id){window.PAYPAL.fpti.trackFPTILink("currencyFilter","openadvancedfilters","openadvancedfilters"),H.trackFPTIEvent({pageGroup:"listPage",pageName:"filter",module:"currencyFilter",event_name:"filter_pressed"}),fe(!ve)}}},l.createElement(f.v0,{id:"activity.activity.inc.filterBy.currency"}),he.label&&": ".concat(he.label),he.label&&l.createElement(v.IconButton,{className:_.Z.closeIcon,svgIconComponent:y.V2CloseSmIcon,id:"closeCurrencyFilter","data-testid":"closeCurrencyFilter",inverse:!0,size:"sm",onClick:ke},l.createElement(f.v0,{id:"activity.activity.inc.dropdown.close"}))),ve&&l.createElement(k,{setIsCurrencyDialogOpen:fe,selectedCurrency:he,setSelectedCurrency:Te,currencyCodes:R})),!(0,P.xb)(Y)&&l.createElement(Z,{serverQueryParamsFilterData:Y})))};O.defaultProps={startDate:"",endDate:"",locality:{}};const B=l.memo(O)}}]);